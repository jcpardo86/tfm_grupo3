<header>
  <app-navbar></app-navbar>
</header>
<main>
  <section class="container container-ppal">
      
    <div class="image">
        <img src="assets/images/header_grupos copia.jpg" class="rounded group-image" alt="Dos amigos comiendo un bocata en la cocina">
    </div>

    <div class="description pt-5">
      <h2 class="font">{{group.nombre}}</h2>
      <p class="fs-5 pt-2">{{group.descripcion}}</p>  
    </div>

    <div class="users pt-4">
        <h2 class="font">Usuarios</h2>
        <div class="pt-2">
            @for(user of users; track user.idUsuario){
                @if($index < users.length-2) {
                  <span class="fs-5">{{user.nombre}} {{user.apellidos}}, </span>
                } @else if ($index === users.length-2) {
                  <span class="fs-5">{{user.nombre}} {{user.apellidos}} y </span>
                } @else {
                  <span class="fs-5">{{user.nombre}} {{user.apellidos}}</span>
                }
            }
        </div>
    </div>

    <div class="mt-5 container-second">

      <div class="container-spents_and_resume">

        <div class="container-spents_and_total rounded-start-4">
        
          <div class="container-spents rounded-top-4 ps-4 pe-4 pt-5 pb-1">
            @if(this.spents && this.spents.length === 0) {
              <div class="text-start ps-2">Aún no has añadido ningún gasto al grupo</div>
            } @else {
              @for(spent of spents; track spent.idGasto; let i = $index) {
                <article class="mb-3">
                  <app-spent-card [mySpent]="spent" [numSpent]="i+1"></app-spent-card>
                </article>
              }
            }
          </div>

          <div class="container-total pb-4">
            <div class="total ps-4">
              <span class="fs-2 ps-5 total-text">Total</span>
              <span class="fs-2 ps-4 total-importe">{{totalSpent}} €</span>
            </div>
            <div class="iconmas-container nuevo-gasto">
              <span class="fs-6 pe-4 gasto">AÑADIR GASTO</span>
              <a [routerLink]="['/newspent', group.idGrupo]">
                <img src="assets/icons/icon_mas.png" class="icon-mas" alt="Icono añadir">
              </a>
            </div>
          </div>
        </div>


        <div class="container-reparto rounded-start-4 mt-3 pb-5 pt-3 ps-4">
          <h2 class="font">Reparto</h2>
          @for(deuda of deudas; track $index) {
            <div class="deudas pt-3">
              <span class="fs-5 ps-5 pe-5">{{deuda}}</span>
              <button type="submit" class="me-5">Liquidar</button>
            </div>
          }
        </div>

      </div>

              <!--<div class="container-total mt-4 pb-5">
                  <div class="row align-items-center">
                      <div class="col">
                        <span class="fs-2 totaltext" style="margin-left: 1rem;" >Total</span>
                      </div>
                      <div class="col">
                        <span class="fs-2 importe">{{ totalSpent }} €</span>
                        <span class="fs-2"></span>
                      </div>
                    </div>
                    <div class="row mt-3">
                      <div class="col">
                        <div class="d-flex align-items-center justify-content-between">
                          <span class="fs-6 gasto" style="white-space: nowrap; margin-right: 1rem;">Añadir gasto</span>
                          <div class="iconmas-container">
                            <a [routerLink]="['/newspent', group.idGrupo]">
                              <img src="assets/icons/icon_mas.png" class="icon-mas" alt="Icono añadir" style="width: 40px; height: 40px;">
                            </a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>-->


      <div class="rounded-end-4 ps-4 pt-5 chat">
        <app-chat [id_group]="idGroup"></app-chat>
      </div>

    </div>

  </section>
</main>
